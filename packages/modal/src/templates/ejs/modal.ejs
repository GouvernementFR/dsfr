<%#
# paramètres de la modole

* id (string, required) : id de la modale

* title (string, required) : titre de la modale

* body (string, required) : contenu de la modale

* footer (string, optionnal) : contenu du footer de la modale, généralement des boutons

* size (string, optionnal) : modificateur de taille
  valeurs :
  * sm : modale étroite
  * lg : modale large

  // TODO: revoir le template pour remettre les éléments de sample dans sample (footer en array d'objet de config de buttons par exemple)

%>
<% eval(include('../../../../core/index.ejs')); %>

<%
 let modalClasses = locals.classes || [];
 let modalAttrs = locals.attributes || {};
 let gridCol = 6;
 const closeButton = locals.closeButton || {};
 closeButton.closeId = id;
 if (closeButton.size === undefined) closeButton.size = undefined;
 if (closeButton.label === undefined) closeButton.label = undefined;

 switch(locals.size) {
    case 'sm':
        gridCol = '6 ' + prefix + '-col-lg-4';
        break;

    case 'lg':
        gridCol = 8;
        break;
 }

 const titleId = id + '-title';
  modalClasses.push(prefix + '-modal');
  modalAttrs.role = 'dialog';
  modalAttrs['aria-labelledby'] = titleId;

 %>

<dialog aria-labelledby="<%= prefix %>-modal-title-<%= id %>" role="dialog" id="<%= id %>" <%- includeClasses(modalClasses) %> <%- includeAttrs(modalAttrs); %> >
    <div class="<%= prefix %>-container--fluid <%= prefix %>-container-md">
        <div class="<%= prefix %>-grid-row <%= prefix %>-grid-row--center">
            <div class="<%= prefix %>-col-12 <%= prefix %>-col-md-<%= gridCol %>">
                <div class="<%= prefix %>-modal__body">
                    <div class="<%= prefix %>-modal__header">
                        <%- include('../../../../links/src/templates/ejs/link-close', closeButton )%>
                    </div>
                    <div class="<%= prefix %>-modal__content">
                        <h1 id="<%= titleId %>" class="<%= prefix %>-modal__title">
                            <% if (locals.titleIcon !== undefined) { %>
                                <span class="<%= prefix %>-fi-<%= locals.titleIcon %> <%= prefix %>-fi--lg"></span>
                            <% } %>
                            <%= locals.title %>
                        </h1>
                        <%- include(body) -%>
                    </div>
                    <% if(locals.footer !== undefined) { %>
                        <div class="<%= prefix %>-modal__footer">
                            <%- include(locals.footer )%>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</dialog>
