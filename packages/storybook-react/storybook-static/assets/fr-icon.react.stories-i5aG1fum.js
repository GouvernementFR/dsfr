import{j as T}from"./jsx-runtime-DEdD30eg.js";import"./index-RYns6xqu.js";const d=a=>Object.isFrozen(a)?a:(Object.entries(a).forEach(([s,e])=>{switch(typeof e){case"object":case"function":if(Array.isArray(e)){a[s]=Object.freeze(e.map(t=>d(t)));break}a[s]=d(a[s]);break}}),Object.freeze(a)),w=d({HTML:"html",WEB_COMPONENT:"web-component",ANGULAR:"angular",REACT:"react",VUE:"vue"}),g=(a,s)=>{const e=[...(s==null?void 0:s.attributes)??[],...(a==null?void 0:a.attributes)??[]].filter((n,o,r)=>r.indexOf(n)===o),t=[...(s==null?void 0:s.properties)??[],...(a==null?void 0:a.properties)??[]].filter((n,o,r)=>r.indexOf(n)===o);return{attributes:e,properties:t}};class S{constructor(){this._schemas={}}getSchema(s){const e=s.$id;if(!this._schemas[e]){const t={...s};if(s.$ref){const n=this._schemas[s.$ref];if(!n)throw new Error(`Schema not found: ${s.$ref}`);if(t.props={...n.props,...t.props},(t.element||n.element)&&(t.element=g(n.element,t.element)),t.elements||n.elements){const o=[...Object.keys(t.elements??{}),Object.keys(n.elements??{})].filter((r,c,i)=>i.indexOf(r)===c);if(o.length>0){const r={};o.forEach(c=>{r[c]=g(n.elements[c],t.elements[c])}),t.elements=r}}}this._schemas[e]=d(t)}return this._schemas[e]}}const j=new S,_={class:{react:"className"}},h={CONSTRUCTION:0,INITIALIZATION:1,NORMALIZATION:2,ASSIGNMENT:3,PARSING:4};class I{constructor(s,e,t,n){this._classes=s,this._attributes=d({...e}),this._properties=t,this._classes=d(s),this._className=s.join(" "),e.class=this._className,this._props={...t,attributes:{}},Object.entries(e).forEach(([o,r])=>{var i;const c=(i=_[o])!=null&&i[n]?_[o][n]:o;this._props.attributes[c]=r})}get classes(){return this._classes}get className(){return this._className}get attributes(){return this._attributes}get properties(){return this._properties}get props(){return this._props}}class b{constructor(s,e=null){if(this._internals={state:h.CONSTRUCTION,context:e,props:{}},this.init(s),this._internals.state<h.INITIALIZATION)throw new Error("Model initialization failed. did you forget to call super.init(props)?");if(s=this.normalize(s),this._internals.state<h.NORMALIZATION)throw new Error("Model normalization failed. did you forget to call super.normalize(props)?");if(this.assign(s),this._internals.state<h.ASSIGNMENT)throw new Error("Model assignment failed. did you forget to call super.assign(props)?");if(this.parse(),this._internals.state<h.PARSING)throw new Error("Model parsing failed. did you forget to call super.parse(classes, attributes)?")}get schema(){return this.constructor.schema}init(s){this._internals.state=h.INITIALIZATION}normalize(s){this._internals.state=h.NORMALIZATION;const e={};let t="";const n=this.schema.props,o=this.schema.required||[];return Object.entries(n).forEach(([r,c])=>{const i=s[r];let l=!0;const u=o.includes(r);if(i===void 0&&(l=!1,u&&(t+=`- property ${r} is required while not defined
`)),l){const p=typeof i;switch(c.type){case"string":switch(p){case"string":e[r]=i;break;case"number":e[r]=String(i);break;case"boolean":e[r]=i?"true":"false";break;default:l=!1}break;case"number":switch(p){case"string":e[r]=i.indexOf(".")?parseFloat(i):parseInt(i);break;case"number":e[r]=i;break;default:l=!1}break;case"array":switch(!0){case p==="string":e[r]=i.split(",");break;case p==="number":e[r]=[i];break;case p==="boolean":e[r]=i?[!0]:[!1];break;case(p==="object"&&Array.isArray(i)):e[r]=i;break;case p==="object":e[r]=i.reduce((f,[A,$])=>(f[parseInt(A)]=$,f),{});break;default:l=!1}break;case"object":switch(p){case"string":try{e[r]=JSON.parse(i)}catch{l=!1}break;case"object":e[r]=i;break;default:l=!1}break;case"boolean":switch(p){case"string":e[r]=i==="true";break;case"number":e[r]=i!==0;break;case"boolean":e[r]=i;break;default:l=!1}break}l||(t+=`- Property '${r}' is not of type '${c.type}'
`,u&&(t+=`- Property '${r}' is required
`))}i!==void 0&&c.enum&&(c.enum.includes(i)?e[r]=i:(t+=`- Property ${r} is not in enum
`,l=!1)),c.default!==void 0&&!l&&(e[r]=c.default,t+=`- set property '${r}' to default value
`)}),t!==""&&console.warn(`model '${this.constructor.name}' normalization:
${t}`),Object.freeze(e),e}assign(s,e={}){const t={};Object.entries(e).forEach(([n,o])=>{t[n]={value:o,writable:!1}}),Object.defineProperties(this,t),this._internals.state=h.ASSIGNMENT}parse(s=[],e={},t={},...n){const o=new I(s,e,t,this._internals.context,this.schema.element);this._internals.element=o;const r=(n.length+2)/3|0,c={};r>0&&Object.entries(this.schema.elements).forEach(([i,l],u)=>{const p=n.slice(u*3,u*3+3).push(this._internals.context,l),f=new I(...p);c[i]=f.props}),this._internals.props=d({...o.props,...c}),this._internals.state=h.PARSING}get classes(){return this._internals.element.classes}get className(){return this._internals.element.className}get attributes(){return this._internals.element.attributes}get elements(){return this._internals.elements}get props(){return this._internals.props}static get schema(){return b._schema}static registerSchema(s){b._schema=j.getSchema(s)}}b.Context=w;const E="https://json-schema.org/draft/2020-12/schema",y="https://github.com/GouvernementFR/dsfr-kit/src/model/component-schema.json",z="Component",R="object",M={id:{type:"string",description:"Une chaîne de caractères représentant l'id du composant.","description@en-US":"A string representing the id of the component."}},F={attributes:["id","class"],properties:["innerHTML"]},C={$schema:E,$id:y,title:z,type:R,props:M,element:F};class N extends b{assign(s,e={}){e.id=s.id,super.assign(s,e)}parse(s=[],e={},t={},...n){this.id&&(e.id=this.id),super.parse(s,e,t,...n)}}N.registerSchema(C);const L=a=>{const s={};return Object.entries(a.props).forEach(([e,t])=>{const n={description:t.description,type:{value:t.type,required:t.required},table:{category:t.category,type:{summary:t.type}}};switch(!0){case t.enum!==void 0:n.control={type:"select"},n.options=t.enum;break;case t.type==="string":n.control="text";break;case t.type==="number":n.control="number";break;case t.type==="boolean":n.control="boolean";break;case t.type==="array":case t.type==="object":n.control="object";break}t.default!==void 0&&(n.table.defaultValue={summary:t.default}),s[e]=n}),s},G=a=>{const s={};return Object.entries(a.props).forEach(([e,t])=>{t.default!==void 0&&(s[e]=t.default)}),s},P="https://json-schema.org/draft/2020-12/schema",x="https://github.com/GouvernementFR/dsfr/src/dsfr/core/icon/_part/component/model/fr-icon-schema.json",q="https://github.com/GouvernementFR/dsfr-kit/src/model/component-schema.json",v="DSFR/core/FrIcon",U="object",Z={name:{type:"string",description:"Nom de l’icône, correspondant au nom du fichier SVG","description@en":"Icon name, corresponding to the filename",example:"warning-fill"},size:{type:"string",description:"Taille de l'icône, par défaut md. Les valeurs possibles sont [sm, md, lg]","description@en":"Icon size, md by default. Available values [sm, md, lg]",default:"md",enum:["sm","md","lg"]}},k=["name"],D={attributes:["aria-hidden"]},V={$schema:P,$id:x,$ref:q,title:v,type:U,props:Z,required:k,element:D};class m extends N{assign(s,e={}){e.name=s.name,e.size=s.size,super.assign(s,e)}parse(s=[],e={}){s.push(`fr-icon-${this.name}`),this.size!==void 0&&this.size!==this.schema.props.size.default&&s.push(`fr-icon--${this.size}`),e["aria-hidden"]="true",super.parse(s,e)}}m.registerSchema(V);console.log(m.schema);const O=a=>{const s=new m(a,w.REACT);return T.jsx("span",{...s.props.attributes})};O.__docgenInfo={description:"",methods:[],displayName:"FrIcon"};const J={args:{id:"warning-icon",name:"warning-fill"}},K={args:{id:"warning-icon-sm",name:"warning-fill",size:m.schema.props.size.enum[0]}},W={args:{id:"warning-icon-lg",name:"warning-fill",size:m.schema.props.size.enum[2]}};console.log(m.schema.title);const Q={title:"DSFR/Core/FrIcon",tags:["autodocs"],component:O,argTypes:L(m.schema),args:G(m.schema)},X=["warning","warningSm","warningLg"];export{X as __namedExportsOrder,Q as default,J as warning,W as warningLg,K as warningSm};
