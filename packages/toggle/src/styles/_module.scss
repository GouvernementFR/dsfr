////
/// Toggle Module
/// @group toggle
////

.#{$prefix}-toggle {
  display: flex;
  position: relative;
  padding: space(2w) 0;

  /*
   * On utilise un input de type checkbox pour gérer le toggle
   * On reset ses styles afin de ne garder que son fonctionnement et son espacement
   * On l'utilisera égalemement pour afficher l'état du toggle (optionnel)
   */
  &__input {
    flex-shrink: 0;
    @include z-index(under);
    width: space(5w);
    height: space(3w);
    border-radius: space(5w);
    @include scheme-element-border-color(bf500);
    margin: 0;
    outline: none;
    -webkit-appearance: none;
    @include scheme-element-focus();
    @include disabled-toggle-choice();

    /*
     * On applique des styles aux pseudo-elements du label quand l'input est check
     * On récupère le texte d'état check (optionnel) via le data-attribute data-rf-checked-label
     */
    &:checked {
      @include scheme-element-bg-color(bf500);

      ~ .#{$prefix}-toggle__label[data-#{$prefix}-unchecked-label]::before,
      ~ .#{$prefix}-toggle__label[data-#{$prefix}-checked-label]::before {
        content: attr(data-rf-checked-label) '\A' attr(data-rf-unchecked-label);
      }

      ~ .#{$prefix}-toggle__label::after {
        transform: translateX(space(2w));
        text-indent: 0;
      }

      &::-ms-check {
        background: blue;
        text-indent: 9999px;
        color: blue;
        @include scheme-element-bg-color(bf500);
      }
    }

    /*
     * Hack pour IE11
     */

    &::-ms-check {
      width: space(5w);
      border-radius: space(5w);
      border: 1px solid blue;
      text-indent: 9999px;
      // @include scheme-element-border-color(bf500);
    }
  }

  &__label {
    display: inline-flex;
    min-height: space(3w);
    padding-left: space(2w);

    &[data-#{$prefix}-unchecked-label],
    &[data-#{$prefix}-checked-label] {
      padding-left: 0;

      &::before {
        content: attr(data-rf-unchecked-label) '\A' attr(data-rf-checked-label);
      }
    }

    /*
     * On prévoit un pseudo-élément pour afficher l'état du bouton( optionnel)
     * On récupère le text via l'attribut [data-rf-unchecked-label]
     */
    &::before {
      font-family: $font-family-sans;
      height: calc(#{space(3v)} - 1px);
      margin-top: calc(#{space(3w)} + #{space(1v)});
      margin-left: -(space(5w));
      margin-right: space(2w);
      font-size: font-size(12);
      line-height: line-height(none);
      @include scheme-element-text-color(bf500);
      white-space: pre-wrap;
      overflow: hidden;
    }

    /*
     * On inclut l'icône check dans un pseudo-element after
     * On la cache via un text-indent quand l'input n'est pas check
     */
    @include font-icon(check-line, md, after) {
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      top: space(2w);
      left: 0;
      border-radius: 50%;
      width: space(3w);
      height: space(3w);
      text-indent: -9999px;
      @include scheme-element-text-color(bf500);
      @include scheme-element-border-color(bf500);
      @include scheme-element-bg-color(w-g750);
      @include z-index(over);
    }
  }

  /*
   * Import des modificateurs (séparateur et label à gauche)
   */
  @import 'modules/variants';
}

/*
 * Provisoire: à enlever quand rf-body sera en place
 */
@import 'modules/group';
