////
/// Radios Module
/// @group radios
////

.#{$prefix}-radio-group {
  .#{$prefix}-hint-text {
    margin-left: space(8v);
    margin-top: -(space(3v));
  }

  // &:not(:last-child) {
  //   input[type="radio"] + label {
  //     margin-right: space(3N);
  //   }
  // }

  &:first-child {
    margin-top: -(space(3v));

    input[type="radio"] + label {
      margin-top: 0;
    }
  }

  &:last-child {
    margin-bottom: -(space(3v));

    input[type="radio"] + label {
      @include radio-rich() {
        margin-bottom: space(6v);
      }
    }
  }

  input[type="radio"] {
    position: absolute;
    opacity: 0;

    + label {
      position: relative;
      cursor: pointer;
      padding: space(3v) 0;
      font-size: font-size(14);
      -webkit-tap-highlight-color: transparent;
      display: grid;
      display: -ms-grid;
      grid-row: 1;
      -ms-grid-row: 2;
      grid-column: 2;
      -ms-grid-column: 2;
      align-items: center;
      -ms-align-items: center;
      grid-template-columns: 1fr space(8v);
      -ms-grid-columns: 1fr space(8v);
      text-align: left;
      direction: rtl;

      @include radio-rich() {
        padding-left: space(14v);
        min-height: space(22v);
        height: 1px; // fix IE vertical center
        width: 100%;
        @include scheme-element-box-shadow-color(g300, true, 'inset 0 0 0 1px $COLOR');
        padding-top: space(2v);
        padding-bottom: space(2v);
        padding-right: space(26v);
        background-position: calc(100% - #{space(1v)}) center;
        background-size: space(20v) space(20v);
        background-repeat: no-repeat;
        @include scheme-element-bg-color(w, true, true);
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        justify-content: center;

        // TODO: refactor hover avec background-color au lieu de backgrounnd-image
        // &:hover,
        // &:active {
        // @include scheme-element-bg-color(block-color-hover, true);
        // }

        // sm
        @include before() {
          width: space(4v);
          height: space(4v);
          position: absolute;
          left: space(7v);
        }

        @include after(flex, '') {
          position: absolute;
          right: 0;
          margin: space(1v);
          padding-left: space(1v);
          vertical-align: middle;
          justify-content: center;
          align-items: center;
          height: space(20v);
          width: space(21v);
          @include scheme-element-border-color(g300, true, left);
          // TODO: ins√©rer la font icon ilustrative ifi
          font-size: space(20v); // ?
        }
      }

      .rf-hint-text {
        margin: 0;
        // flex: 0 0 auto;
        grid-row: 2;
        grid-column: 1;
        -ms-grid-row: 2;
        -ms-grid-column: 1;
      }

      @include before() {
        content: '';
        display: inline-block;
        // position: absolute;
        // left: 0;
        flex-shrink: 0;
        width: space(6v);
        height: space(6v);
        border: 1px solid;
        margin-right: space(1N);
        border-radius: 50%;
        @include scheme-element-border-color(g800, true);
        transform-origin: center;
        transition: transform 0.3s;
        grid-row: 1;
        -ms-grid-row: 1;
        grid-column: 2;
        -ms-grid-column: 2;
        align-items: center;
        -ms-align-items: center;
      }
    }

    &:checked {
      + label {
        @include before() {
          @include scheme-element-box-shadow-color(w, true, 'inset 0 0 0 5px $COLOR');
          @include scheme-element-bg-color(bf500, true);
        }

        @include radio-rich() {
          width: 100%;
          @include scheme-element-bg-color(bf500);
          @include scheme-element-text-color(w-bf500, true);
          @include scheme-element-box-shadow-color(bf500, true, 'inset 0 0 0 1px $COLOR');

          @include before() {
            @include scheme-element-border-color(w-bf500, true);
            @include scheme-element-box-shadow-color(bf500, true, 'inset 0 0 0 3px $COLOR');
            @include scheme-element-bg-color(w-bf500, true);
          }

          .#{$prefix}-hint-text {
            @include scheme-element-text-color(g200);
          }
        }
      }
    }

    // &:checked,
    // &:active {
    //   + label::after {
    //     @include scheme-element-bg-color(bf500);
    //   }
    // }

    @include scheme-element-focus(false, '+ label::before');

    // &:active {
    //   + label {
    //     &::before {
    //       @include scheme-element-bg-color(active-radio, false);
    //       @include scheme-element-border-color(transparent);
    //       transform: scale(1.2);
    //     }

    //     &::after {
    //       @include scheme-element-bg-color(bf500);
    //       transform: scale(1.3);
    //     }
    //   }
    // }

    @include disabled-form-choice();
  }

  /**
  * Taille SM et taille radio riche
  */
  &--sm {
    input[type="radio"] {
      & + label {
        @include before() {
          width: space(4v);
          height: space(4v);
        }
      }

      &:checked + label {
        @include before() {
          box-shadow: inset 0 0 0 3px var(--w);
        }
      }
    }
  }
}

.#{$prefix}-fieldset {
  .#{$prefix}-radio-group {
    &:first-child {
      input[type="radio"] + label {
        @include radio-rich() {
          margin-top: space(2v);
        }
      }
    }

    input[type="radio"] + label {
      @include radio-rich() {
        margin-top: space(2v);
        margin-bottom: space(4v);
      }
    }
  }

  &--inline {
    .#{$prefix}-radio-group {
      &:not(:last-child) {
        input[type="radio"] + label {
          @include radio-rich() {
            margin-right: space(3v);
            margin-bottom: space(2v);
          }
        }
      }

      &:last-child {
        input[type="radio"] + label {
          @include radio-rich() {
            margin-bottom: space(5v);
          }
        }
      }

      &:first-child {
        input[type="radio"] + label {
          @include radio-rich() {
            margin-top: space(5v);
          }
        }
      }
    }
  }
}
