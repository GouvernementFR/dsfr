<%#
# paramètres média image

* media.src (string, required): url de l'image

* media.alt (string, optional): texte alternatif de l'image (peut être vide si l'image est illlustrative)

* media.classes (array, optional) : classes sur l'image

* media.attributes (object, optional) : Attributs supplémentaires sur l'image

* media.style (object, optional) : raccourci vers l'attribut style

%>
<% eval(include('../../../index.ejs')); %>

<%
 let media = locals.media || {};
 const mediaClasses = media.classes || [];
 const mediaAttributes = media.attributes || {};
 let comment;
 if (media.style) mediaAttributes.style = media.style;
 %>

<% switch (media.comment) {
  case 'rendered':
    comment = "L’alternative de l’image (attribut alt) doit impérativement être renseignée et reprendre le texte visible dans l’image";
    media.alt = "[À MODIFIER | texte alternatif de l’image]";
    break;

  case 'unrendered':
    comment = "L’alternative de l’image (attribut alt) doit rester vide car l’image est illustrative et ne doit pas être restituée aux technologies d’assistance";
    media.alt = "";
    break;

  case 'unknown':
    comment = "L’alternative de l’image (attribut alt) doit toujours être présent, sa valeur peut-être vide (image n’apportant pas de sens supplémentaire au contexte) ou non (porteuse de texte ou apportant du sens) selon votre contexte";
    media.alt = "[À MODIFIER | vide ou texte alternatif de l’image]";
    break;
  }
%>
<img <%- includeClasses(mediaClasses) %> <%- includeAttrs(mediaAttributes) %> src="<%= media.src %>" alt="<%= media.alt %>"  />
<% if (comment) { %>
<!-- <%= comment %> -->
<% } %>
