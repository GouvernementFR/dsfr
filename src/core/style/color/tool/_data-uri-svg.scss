////
/// Schemes Tools : Data URI SVG
/// @group schemes
////

/// Combinaison de couleur appliquée à un svg intégré en data-uri
/// @access public
/// @param {String} $decisions - token de décision
/// @param {Boolean} $legacy - si true, applique la couleur directement, sinon au travers d'une custom property
/// @param {Object} $value - le SVG en data-uri
/// @param {String} $prop - propriété sur laquelle est assignée le svg
/// @example @include scheme-element-data-uri-svg(text-title grey, false, url("data:image/svg+xml;utf8,<svg><path fill="$COLOR" /></svg>"));
@mixin scheme-element-data-uri-svg($tokens, $options: (), $value: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' viewBox='0 0 24 24' ></svg>"), $prop:background-image) {
  $legacy: map-get($options, legacy);
  $important: map-get($options, important);
  $tokens: normalise-tokens($tokens);
  $light-colors: get-colors($tokens, hex, (theme: light));
  $light: get-result($light-colors, $value);
  $light: important($light, $important);

  @if $legacy {
    @include legacy(ie11) {
      #{$prop}: #{url(svg-encode($light, true))};
    }
  }
  @else {
    --data-uri-svg: #{url(svg-encode($light, false))};

    $dark-colors: get-colors($tokens, hex, (theme: dark));
    $dark: get-result($dark-colors, $value);
    $dark: important($dark, $important);

    @include theme-selector(dark) {
      --data-uri-svg: #{url(svg-encode($dark, false))};
    }

    #{$prop}: var(--data-uri-svg);
  }
}
