<% eval(include('../../../../core/index.ejs'));

let table = locals.table || {};
let classes = table.classes || [];
const attributes = table.attributes || {};
attributes.id = table.id || uniqueId('datatable-tbody');

classes.push(prefix + '-datatable-tbody');
%>

<tbody <%- includeClasses(classes) %> <%- includeAttrs(attributes) %>>
    <% for(let row = 0; row < table.rows.length; row++) { %>
        <%
            const rowClasses = [];
            rowClasses.push(prefix + '-datatable-row');
            if (table.rows[row].selected) rowClasses.push(prefix + '-datatable-row__selected');
            if (table.rows[row].expandable) rowClasses.push(prefix + '-datatable-row__expandable');
            if (table.rows[row].expanded) rowClasses.push(prefix + '-datatable-row__expanded');
            const rowAttributes = {};
            rowAttributes['data-row-key'] = row + 1;
        %>
        <tr <%- includeClasses(rowClasses) %> <%- includeAttrs(rowAttributes) %>>
            <% for(let col = 0; col < table.tbody[row].length; col++) { %>
                <%
                    const colTag = table.tbody[row][col].tag || 'td';
                    const colClasses = table.tbody[row][col].classes || [];
                    colClasses.push(prefix + '-datatable-cell');
                    const colAttributes = table.tbody[row][col].attributes || {};
                %>
                <<%- colTag %> <%- includeClasses(colClasses) %> <%- includeAttrs(colAttributes) %>>
                    <%- table.tbody[row][col].content %>
                </<%- colTag %>>
            <% } %>
        </tr>
    <% } %>
</tbody>
