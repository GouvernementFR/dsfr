<%#
# paramètres navigation mega-menu

* menu.collapseId (string, required) : id du collapse

* menu.leader (object, optional) : Paramètres du leader du mega-menu (voir leader)

* menu.categories (object, required) : Paramètres des éléments de navigation
    ** menu.categories.items (array, required) : tableau d'éléments de navigation

%>

<% let menu = locals.menu || {}; %>
<%- include('./btn', {menu:menu}); %>
<div class="<%= prefix %>-collapse <%= prefix %>-mega-menu" id="<%= menu.collapseId %>" >
    <div class="<%= prefix %>-container <%= prefix %>-container--fluid <%= prefix %>-container-lg" >
        <div class="<%= prefix %>-grid-row <%= prefix %>-grid-row-lg--gutters">
            <div class="<%= prefix %>-col-12 <%= prefix %>-mb-n3v">
              <%- include('../../../link/template/ejs/link-close', {link: { closeId: menu.collapseId, label: "Fermer" }}); %>
            </div>
            <%
                if (menu.leader !== undefined) {
            %>
                <%- include('./leader', {menu: menu}); %>

            <% } %>

            <%
                let category;
                for (let j = 0; j < menu.categories.length; j++) {
                  category = menu.categories[j];
            %>

            <div class="<%= prefix%>-col-12 <%= prefix%>-col-lg-3">
                <h5 class="<%= prefix %>-mega-menu__category">
                    <%- include('./link', {menu: category}); %>
                </h5>

                <ul class="<%= prefix %>-mega-menu__list" >
                    <%
                    for (let i = 0; i < category.items.length; i++) {
                        let item = category.items[i];
                        item.isPage = true;
                    %>
                    <li>
                        <%- include('./link', {menu: item}); %>
                    </li>
                    <% } %>
                </ul>
            </div>
            <% } %>
        </div>
    </div>
</div>
