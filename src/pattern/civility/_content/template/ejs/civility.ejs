<%#
# paramètres civility

* civility (object, required) : objet contenant les paramètres

* civility.id (string, required) : id du composant

* civility.legend (string, optionnal) : légende du composant

* civility.label (string, optionnal) : libellé du composant

* civility.placeholder (string, optionnal) : placeholder du composant

* civility.type (string) : type de champs utilisé chaque enfant du composant
    ** radio : civilité bouton radio
    ** select : civilité liste déroulante

* civility.items (array, required) : tableau de données de chaque enfant du composant

* civility.items[].value (string, required) : valeur du champ

* civility.items[].label (string, required) : libellé du champ

%>
<% eval(include('../../../../core/index.ejs')); %>

<%
const civility = locals.civility || {};
const fieldset = {};
const elements = [];
if (civility.items && civility.items.length) {
  civility.items.forEach((item, index) => {
        elements.push({
            path: 'core/form/_content/template/ejs/fieldset',
            data: {
                fieldset: {
                    disabled: item.disabled || undefined,
                    attributes: {
                        'aria-label': item.label,
                    },
                    elements: [{
                        path: `component/${item.type}/_content/template/ejs/${item.template}`,
                        data: {
                            [item.type]: {
                                id: `${civility.id}-${index}`,
                                name: civility.id,
                                label: item.label || '',
                                value: item.value || '',
                                hint: item.hint || '',
                                checked: item.checked || false,
                                size: item.size || '',
                                attributes: item.attributes || {},
                                kind: item.kind || '',
                                options: item.options || [],
                                placeholder: item.placeholder || '',
                            }
                        }
                    }]
                }
            }
        });
    });
}
fieldset.elements = elements;
fieldset.legend = civility.legend;
fieldset.id = civility.id;
fieldset.attributes = { 'aria-label': civility.label,}
%>

<%- include('../../../../../core/form/_content/template/ejs/fieldset', {fieldset: fieldset}) %>
