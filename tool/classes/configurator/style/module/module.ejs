@use 'sass:map';
@use 'sass:list';
@use '<%= top %>sass/path';
@use '<%= top %>sass/media-query';
@use 'setting';

$setting: setting.$setting !default;
<% for (const use of uses) { %>
@use '<%= use.path %>' as <%= use.module %> with ($setting: map.get($setting, <%= use.id %>));<%
} %>

@include path.to-dist(map.get($setting, depth));<%
for (const mixin of mixins) {
  let space = '  ';
%>

@mixin <%= mixin.name %> ($breakpoints: first sm md lg xl, $with-media-query: true, $situations: recommended deprecated) {
<%
  for (const breakpoint of mixin.breakpoints) {
    if (breakpoint.id !== 'first') {
      space = '    ';
  %>  @include media-query.condition(<%= breakpoint.id %>, $breakpoints, $with-media-query) {
<% }
    for (const module of breakpoint.modules) {
%><%= space %>@if list.index($situations, <%= module.situation %>) {
<%= space %>  @include <%= module.id %>.<%= breakpoint.id %>();
<%= space %>}
<% }
    if (breakpoint.id !== 'first') { %>  }
<%
    }
  }
%>}<% } %>
