{"version":3,"file":"table.nomodule.js","sources":["../../../.config/config.js","../../../src/core/api.js","../../../src/component/table/script/table/table-emission.js","../../../src/component/table/script/table/table.js","../../../src/component/table/script/table/table-selector.js","../../../src/component/table/script/table/table-element.js","../../../src/component/table/script/table/table-caption.js","../../../src/component/table/index.js","../../../src/component/table/main.js"],"sourcesContent":["const config = {\r\n  prefix: 'fr',\r\n  namespace: 'dsfr',\r\n  organisation: '@gouvfr',\r\n  version: '1.5.1'\r\n};\r\n\r\nexport default config;\r\n","import config from './config.js';\nconst api = window[config.namespace];\nexport default api;\n","import api from '../../api.js';\n\nexport const TableEmission = {\n  SCROLLABLE: api.internals.ns.emission('table', 'scrollable'),\n  CHANGE: api.internals.ns.emission('table', 'change'),\n  CAPTION_HEIGHT: api.internals.ns.emission('table', 'captionheight')\n};\n","import api from '../../api.js';\nimport { TableEmission } from './table-emission.js';\n\nconst PADDING = '1rem'; // padding de 4v sur le caption\n\nclass Table extends api.core.Instance {\n  static get instanceClassName () {\n    return 'Table';\n  }\n\n  init () {\n    this.addAscent(TableEmission.CAPTION_HEIGHT, this.setCaptionHeight.bind(this));\n  }\n\n  setCaptionHeight (value) {\n    this.setProperty('--table-offset', `calc(${value}px + ${PADDING})`);\n  }\n}\n\nexport { Table };\n","import api from '../../api.js';\n\nexport const TableSelector = {\n  TABLE: api.internals.ns.selector('table'),\n  SHADOW: api.internals.ns.selector('table__shadow'),\n  SHADOW_LEFT: api.internals.ns.selector('table__shadow--left'),\n  SHADOW_RIGHT: api.internals.ns.selector('table__shadow--right'),\n  ELEMENT: `${api.internals.ns.selector('table')}:not(${api.internals.ns.selector('table--no-scroll')}) table`,\n  CAPTION: `${api.internals.ns.selector('table')} table caption`\n};\n","import api from '../../api.js';\nimport { TableSelector } from './table-selector.js';\n\nconst SCROLL_OFFSET = 8; // valeur en px du scroll avant laquelle le shadow s'active ou se desactive\n\nclass TableElement extends api.core.Instance {\n  static get instanceClassName () {\n    return 'TableElement';\n  }\n\n  init () {\n    this.listen('scroll', this.scroll.bind(this));\n    this.content = this.querySelector('tbody');\n    this.isResizing = true;\n  }\n\n  get isScrolling () {\n    return this._isScrolling;\n  }\n\n  set isScrolling (value) {\n    if (this._isScrolling === value) return;\n    this._isScrolling = value;\n\n    if (value) {\n      this.addClass(TableSelector.SHADOW);\n      this.scroll();\n    } else {\n      this.removeClass(TableSelector.SHADOW);\n      this.removeClass(TableSelector.SHADOW_LEFT);\n      this.removeClass(TableSelector.SHADOW_RIGHT);\n    }\n  }\n\n  /* ajoute la classe fr-table__shadow-left ou fr-table__shadow-right sur fr-table en fonction d'une valeur de scroll et du sens (right, left) */\n  scroll () {\n    const isMin = this.node.scrollLeft <= SCROLL_OFFSET;\n    const max = this.content.offsetWidth - this.node.offsetWidth - SCROLL_OFFSET;\n    const isMax = Math.abs(this.node.scrollLeft) >= max;\n    const isRtl = document.documentElement.getAttribute('dir') === 'rtl';\n    const minSelector = isRtl ? TableSelector.SHADOW_RIGHT : TableSelector.SHADOW_LEFT;\n    const maxSelector = isRtl ? TableSelector.SHADOW_LEFT : TableSelector.SHADOW_RIGHT;\n\n    if (isMin) {\n      this.removeClass(minSelector);\n    } else {\n      this.addClass(minSelector);\n    }\n\n    if (isMax) {\n      this.removeClass(maxSelector);\n    } else {\n      this.addClass(maxSelector);\n    }\n  }\n\n  resize () {\n    this.isScrolling = this.content.offsetWidth > this.node.offsetWidth;\n  }\n\n  dispose () {\n    this.isScrolling = false;\n  }\n}\n\nexport { TableElement };\n","import api from '../../api.js';\nimport { TableEmission } from './table-emission.js';\n\nclass TableCaption extends api.core.Instance {\n  static get instanceClassName () {\n    return 'TableCaption';\n  }\n\n  init () {\n    this.height = 0;\n    this.isResizing = true;\n  }\n\n  resize () {\n    const height = this.getRect().height;\n    if (this.height === height) return;\n    this.height = height;\n    this.ascend(TableEmission.CAPTION_HEIGHT, height);\n  }\n}\n\nexport { TableCaption };\n","import api from './api.js';\nimport { Table } from './script/table/table.js';\nimport { TableElement } from './script/table/table-element.js';\nimport { TableSelector } from './script/table/table-selector.js';\nimport { TableCaption } from './script/table/table-caption.js';\n\napi.table = {\n  Table: Table,\n  TableElement: TableElement,\n  TableCaption: TableCaption,\n  TableSelector: TableSelector\n};\n\nexport default api;\n","import api from './index.js';\n\napi.internals.register(api.table.TableSelector.TABLE, api.table.Table);\napi.internals.register(api.table.TableSelector.ELEMENT, api.table.TableElement);\napi.internals.register(api.table.TableSelector.CAPTION, api.table.TableCaption);\n\nexport default api;\n"],"names":["const"],"mappings":"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"}