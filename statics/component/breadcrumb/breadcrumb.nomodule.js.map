{"version":3,"file":"breadcrumb.nomodule.js","sources":["../../../.config/config.js","../../../src/core/api.js","../../../src/component/breadcrumb/script/breadcrumb/breadcrumb.js","../../../src/component/breadcrumb/script/breadcrumb/breadcrumb-selector.js","../../../src/component/breadcrumb/index.js","../../../src/component/breadcrumb/main.js"],"sourcesContent":["const config = {\r\n  prefix: 'fr',\r\n  namespace: 'dsfr',\r\n  organisation: '@gouvfr',\r\n  version: '1.5.1'\r\n};\r\n\r\nexport default config;\r\n","import config from './config.js';\nconst api = window[config.namespace];\nexport default api;\n","import api from '../../api.js';\n\nclass Breadcrumb extends api.core.Instance {\n  constructor () {\n    super();\n    this.count = 0;\n    this.focusing = this.focus.bind(this);\n  }\n\n  static get instanceClassName () {\n    return 'Breadcrumb';\n  }\n\n  init () {\n    this.getCollapse();\n    this.isResizing = true;\n  }\n\n  get proxy () {\n    const scope = this;\n    return Object.assign(super.proxy, {\n      focus: scope.focus.bind(scope),\n      disclose: scope.collapse.disclose.bind(scope.collapse)\n    });\n  }\n\n  getCollapse () {\n    const collapse = this.collapse;\n    if (collapse) {\n      collapse.listen(api.core.DisclosureEvent.DISCLOSE, this.focusing);\n    } else {\n      this.addAscent(api.core.DisclosureEmission.ADDED, this.getCollapse.bind(this));\n    }\n  }\n\n  resize () {\n    const collapse = this.collapse;\n    const links = this.links;\n    if (!collapse || !links.length) return;\n\n    if (this.isBreakpoint(api.core.Breakpoints.MD)) {\n      if (collapse.buttonHasFocus) links[0].focus();\n    } else {\n      if (links.indexOf(document.activeElement) > -1) collapse.focus();\n    }\n  }\n\n  get links () {\n    return [...this.querySelectorAll('a[href]')];\n  }\n\n  get collapse () {\n    return this.element.getDescendantInstances(api.core.Collapse.instanceClassName, null, true)[0];\n  }\n\n  focus () {\n    this.count = 0;\n    this._focus();\n  }\n\n  _focus () {\n    const link = this.links[0];\n    if (!link) return;\n    link.focus();\n    this.request(this.verify.bind(this));\n  }\n\n  verify () {\n    this.count++;\n    if (this.count > 100) return;\n    const link = this.links[0];\n    if (!link) return;\n    if (document.activeElement !== link) this._focus();\n  }\n}\n\nexport { Breadcrumb };\n","import api from '../../api.js';\n\nexport const BreadcrumbSelector = {\n  BREADCRUMB: api.internals.ns.selector('breadcrumb')\n};\n","import api from './api.js';\nimport { Breadcrumb } from './script/breadcrumb/breadcrumb.js';\nimport { BreadcrumbSelector } from './script/breadcrumb/breadcrumb-selector.js';\n\napi.breadcrumb = {\n  BreadcrumbSelector: BreadcrumbSelector,\n  Breadcrumb: Breadcrumb\n};\n\nexport default api;\n","import api from './index.js';\n\napi.internals.register(api.breadcrumb.BreadcrumbSelector.BREADCRUMB, api.breadcrumb.Breadcrumb);\n\nexport default api;\n"],"names":["const","super"],"mappings":"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"}